{% extends "layout.html" %}
{% block body %}
<div class="am-container">
    <div class="am-u-sm-12">
        <table class="am-table">
            <thead>
                <tr>
                    <th>编号</th>
                    <th>题目名称</th>
                    <th>状态</th>
                    <th>分数</th>
                    <th>总时间</th>
                    <th>提交者</th>
                    <th>提交时间</th>
                </tr>
            </thead>
            <tbody>
                {% set see_result=judge.is_allowed_see_result(user) %}
                {% set result=judge.result_dict() %}
                <tr>
                    <td>{{judge.id}}</td>
                    <td><a href="{{url_for('problem',problem_id=judge.problem.id)}}">{{judge.problem.title}}</a></td>
                    {% if see_result %}
                    <td>{{result["status"]}}</td>
                    <td>{{result["score"]}}</td>
                    <td>{{result["total_time"]}}</td>
                    {% else %}
                    <td>隐藏</td>
                    <td>隐藏</td>
                    <td>隐藏</td>
                    {% endif %}
                    <td>{{judge.user.nickname}}</td>
                    <td>{{judge.pretty_submit_time()}}</td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="am-u-sm-12">
        {% set see_code = judge.is_allowed_see_code(user) %}
        {% if see_code%}
        <pre><code>{{judge.code}}</code></pre>
        {% else %}
        <pre><code>=。=现在不可以看代码！</code></pre>
        {% endif %}
    </div>
    {% if see_code and see_result%}
        {% for i in range(1,result["case"]+1) %}
        <div class="am-u-sm-12">
            {% set case=result[tostr(i)] %}
            <h2>测试点:{{i}} 状态:{{case["status"]}} 运行时间:{{case["time_used"]}}ms 使用内存:{{case["memory_used"]}}kb</h2>
            <strong>输入文件</strong>
            <pre><code>{{case["input"]}}</code></pre>
            <strong>期望输出</strong>
            <pre><code>{{case["expect_output"]}}</code></pre>
            <strong>你的输出</strong>
            <pre><code>{{case["your_output"]}}</code></pre>
        </div>
        {% endfor %}
    {% endif %}
</div>
{% endblock %}